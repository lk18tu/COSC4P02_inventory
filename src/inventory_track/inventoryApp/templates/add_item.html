<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Item</title>
 {% load static %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
<h1>Add Item to {{ table_name }} Table</h1>
 
<form method="POST" enctype="multipart/form-data">
{% csrf_token %}
<div class="mb-3">
<label for="title" class="form-label">Title</label>
<input type="text" class="form-control" id="title" name="title" required>
</div>

<div class="mb-3">
<label for="quantity" class="form-label">Quantity</label>
<input type="number" class="form-control" id="quantity" name="quantity" required>
</div>

<div class="form-check mb-3">
<input type="checkbox" class="form-check-input" id="completed" name="completed">
<label class="form-check-label" for="completed">Completed</label>
</div>

<div class="mb-3">
    <label for="image" class="form-label">Upload Image (Optional)</label>
    <input type="file" class="form-control" id="image" name="image" accept="image/*" onchange="validateImageName()">
</div>
<button type="submit" class="btn btn-primary">Add Item</button>
</form>
</div>
</body>


<script>
    function validateImageName() {
        const fileInput = document.getElementById('image');
        const fileName = fileInput.value.split('\\').pop(); // Get the file name
        const errorMessage = document.getElementById('image-error');

        if (fileName.length > 250) {
            if (!errorMessage) {
                const errorDiv = document.createElement('div');
                errorDiv.id = 'image-error';
                errorDiv.style.color = 'red';
                errorDiv.innerText = 'File name must be less than 250 characters.';
                fileInput.parentElement.appendChild(errorDiv);
            }
            fileInput.setCustomValidity('File name must be less than 250 characters.');
        } else {
            fileInput.setCustomValidity(''); // Clear custom validity if the name is fine
            if (errorMessage) {
                errorMessage.remove(); // Remove the error message if the validation passes
            }
        }
    }
</script>
</html>
